{# -*- engine:django -*- #}
{% extends "core/base.html" %}
{% load bootstrap4 i18n static %}

{% block bootstrap4_extra_head %}
 {{ block.super }}
 <link rel="stylesheet" href="{% static 'css/alsijil/lesson.css' %}" />
{% endblock %}

{% block page_title %}
 {% blocktrans %}Lesson documentation{% endblocktrans %}
{% endblock %}

{% block content %}
 {% if lesson_period %}
  <div class="card">
   <div class="card-header bg-light text-dark">
    {% for group in lesson_period.get_groups.all %}
     <span>{{ group.short_name }}</span>,
    {% endfor %}

    {{ lesson_period.get_subject.name }},

    {% for teacher in lesson_period.get_teachers.all %}
     {{ teacher.short_name }}
    {% endfor %}
   </div>
   <div class="card-body">
    <form method="post">
     {% csrf_token %}
     {% bootstrap_form lesson_documentation_form %}
     <input type="hidden" name="action" value="lesson_documentation" />
     <input type="submit" value="Update" />
    </form>
   </div>
  </div>

  <div class="card">
   <div class="card-header bg-light text-dark">
    {% blocktrans %}Personal notes{% endblocktrans %}
   </div>
   <div class="card-body">
    <form method="post">
     {% csrf_token %}
     {{ personal_note_formset.management_form }}

     <table class="table table-striped table-bordered table-hover table-condensed table-responsive w-100 d-block d-md-table">
      <tr>
       <th>{% blocktrans %}Person{% endblocktrans %}</th>
       <th>{% blocktrans %}Absent{% endblocktrans %}</th>
       <th>{% blocktrans %}Tardiness{% endblocktrans %}</th>
       <th>{% blocktrans %}Excused{% endblocktrans %}</th>
       <th>{% blocktrans %}Remarks{% endblocktrans %}</th>
      </tr>
      {% for form in personal_note_formset %}
       {{ form.id }}
       <tr>
        <td>{{ form.person_name }}</td>
        <td>{{ form.absent }}</td>
        <td>{{ form.late }}</td>
        <td>{{ form.excused }}</td>
        <td>{{ form.remarks }}</td>
       </tr>
      {% endfor %}
     </table>

     <input type="hidden" name="action" value="personal_notes" />
     <input type="submit" value="Update" />
    </form>
   </div>
  </div>
 {% else %}
  <div class="card text-white bg-danger">
   <div class="card-header">
    {% blocktrans %}No lesson found{% endblocktrans %}
   </div>
   <div class="card-body">
    <p>
     {% blocktrans %}
      You either selected an invalid lesson or there
      is currently no lesson in progress.
     {% endblocktrans %}
    </p>
   </div>
  </div>
 {% endif %}
{% endblock %}
