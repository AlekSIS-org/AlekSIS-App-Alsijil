{# -*- engine:django -*- #}
{% extends "core/base.html" %}
{% load bootstrap4 font_awesome i18n %}

{% block page_title %}
 {% blocktrans %}Current week{% endblocktrans %}
{% endblock %}

{% block content %}
 {% if group %}
  <div class="row">
   <div class="col-md-7">
    <div class="card">
     <div class="card-header bg-light text-dark">
      {% blocktrans %}Week{% endblocktrans %}
      {{ week }} ({{ week|week_start }} - {{ week|week_end }})
      ,
      {{ group.name }}
     </div>
     <div class="card-body">
      {% regroup lesson_periods by period.weekday_display as periods_by_day %}
      {% for weekday, periods in periods_by_day %}
       <table class="table table-striped table-bordered table-hover table-responsive-xl">
        <thead>
         <tr>
          <th>{% blocktrans %}Period{% endblocktrans %}</th>
          <th>{% blocktrans %}Subject{% endblocktrans %}</th>
          <th>{% blocktrans %}Teachers{% endblocktrans %}</th>
          <th>{% blocktrans %}Topic{% endblocktrans %}</th>
         </tr>
        </thead>
        <tbody>
         {% for period in periods %}
          <tr>
           <td>{{ period.period.period }}</td>
           <td>{{ lesson.subject.name }}</td>
           <td>{{ lesson.teachers|join:', ' }}</td>
           <td>
            {% if period.documentations__count %}
             {% fa 'fa-check' %}
            {% endif}
           </td>
          </tr>
         {% endfor %}
        </tbody>
       </table>
      {% endfor %}
     </div>
    </div>
   </div>
   <div class="col-md-5">
    <div class="card">
     <div class="card-header bg-light text-dark">
      {% blocktrans %}Personal notes{% endblocktrans %}
     </div>
     <div class="card-body">
      Not implemented yet.
     </div>
    </div>
   </div>
  </div>
 {% else %}
  <div class="card text-white bg-danger">
   <div class="card-header">
    {% blocktrans %}No group selected{% endblocktrans %}
   </div>
   <div class="card-body">
    <p>
     {% blocktrans %}
      You must select a group to see the week summary.
     {% endblocktrans %}
    </p>
   </div>
  </div>
 {% endif %}
{% endblock %}
